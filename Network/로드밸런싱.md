## πΒ λ΅λ“λ°Έλ°μ‹±μ΄λ€?

μ—¬λ¬ μ„λ²„μ μ‘μ—…μ„ λ¶„μ‚°ν•μ—¬ μ›Ή μ‚¬μ΄νΈ, μ–΄ν”λ¦¬μΌ€μ΄μ…, λ°μ΄ν„°λ² μ΄μ¤ λ“± μ„λΉ„μ¤μ μ„±λ¥κ³Ό μ•μ •μ„±μ„ ν–¥μƒμ‹μΌμ£Όλ©° κ³ κ°€μ©μ„± μΈν”„λΌμ ν•µμ‹¬ κµ¬μ„±μ”μ†

<aside>
π’΅ κ³ κ°€μ©μ„±μ΄λ€?
κ°€μ©μ„±μ΄ λ†’λ‹¤ : μ„λ²„μ™€ λ„¤νΈμ›ν¬, λ°μ΄ν„°λ² μ΄μ¤ λ“± μ •λ³΄ μ‹μ¤ν…μ΄ μ¤λμ‹κ°„ μ§€μ†μ μΌλ΅ μ¥μ• μ—†μ΄ μ •μƒ μ΄μμ΄ κ°€λ¥ν• μ„±μ§

<aside>
π’΅ λ³΄μ• 3μ”μ† : κ°€μ©μ„± / κΈ°λ°€μ„± / λ¬΄κ²°μ„±

</aside>

</aside>

### πΒ μ΄μ μ€?

1. **μν‰ ν™•μ¥**
κ³ κ°€μ μ„λ²„λ΅ μμ§ν™•μ¥ν•λ” κ²ƒμ΄ μ•„λ‹ μ €λ ΄ν• λ‹¤μμ μ„λ²„λ¥Ό μ¦μ„¤ν•λ” μν‰ν™•μ¥ κ°€λ¥
2. **λ¬΄μ¤‘λ‹¨ μ„λΉ„μ¤**
μ„λ²„ ν•λ€μ μ¥μ• κ°€ λ°μƒν•κ±°λ‚ λ™κΈ°μ μΈ μ‘μ—…μ„ μ²λ¦¬ν•λ” κ²½μ° λ‹¤λ¥Έ μ„λ²„λ΅ νΈλν”½ λ¶„λ°°ν•μ—¬ μµμΆ… μ‚¬μ©μ(End User)μ—κ² μν–¥μ΄ μ—†λ‹¤
3. **λ€λ‰μ νΈλν”½ λ¶„λ°°**
λ‹¨μΌ μ„λ²„μ— λ†’μ€ λ¶€ν•λ¥Ό μν–‰ν•μ§€ μ•κ³  μ—¬λ¬ μ„λ²„μ— μ‘μ—…μ„ λ¶„μ‚°ν•μ—¬ μ μ€ μ–‘μ μ‘μ—…μ„ μν–‰ν•κ² ν•λ©° μ¥μ• λ‚ λ¶€ν•κ°€ μ μ€ κµ¬μ„±μ„ κ²½ν—ν•λ‹¤

### π λ‹¨μ μ€?

1. **μ„Έμ… λ°μ΄ν„° κ΄€λ¦¬**
νΉμ • μ‚¬μ©μμ— λ€ν• μ„Έμ…μ„ ν•λ‚μ μ„λ²„μ— μ €μ¥ν•λ” κ²½μ° μ¶”ν›„ λ‹¤λ¥Έ μ„λ²„λ΅ λ°Έλ°μ‹±λλ‹¤λ©΄ ν΄λΌμ΄μ–ΈνΈμ μ„Έμ…μ΄ μ μ§€λμ§€ μ•μΌλ©° λ¶€κ°€μ μΈ μ²λ¦¬κ°€ ν•„μ”ν•¨

### π¤”Β μ ν•

- **ν•λ“μ›¨μ–΄ λ΅λ“λ°Έλ°μ„**Β 
μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό λ„¤νΈμ›ν¬ νΈλν”½μ„ λ¶„μ‚°ν•κΈ° μ„ν•΄ λ¬Όλ¦¬μ  μ‚¬λ‚΄ ν•λ“μ›¨μ–΄ μ¥μΉμ— μμ΅΄ν•λ” λ°©μ‹  
λ§μ€ νΈλν”½μ„ μ²λ¦¬ν•  μ μμ§€λ§ κ°€κ²©μ΄ λ†’μΌλ©° μ μ—°μ„±μ΄ λ‚®μ  
ex. Switch  
- **μ†ν”„νΈμ›¨μ–΄ λ΅λ“λ°Έλ°μ„**
μ‚¬μ© λλ” μ¤ν”μ†μ¤ μ–΄ν”λ¦¬μΌ€μ΄μ…μ„ μ„¤μΉν•μ—¬ μ‚¬μ©ν•λ” λ°©μ‹  
ν•λ“μ›¨μ–΄ λ΅λ“λ°Έλ°μ„μ— λΉ„ν•΄ κ°€κ²©μ΄ λ‚®μµλ‹λ‹¤.  
ex. Nginx, HAProxy
    

### π”Β λ¶„μ‚° μ•κ³ λ¦¬μ¦

- **λΌμ΄λ“λ΅λΉ**
μ”μ²­μ— λ€ν•μ—¬ μ„λ²„λ¥Ό μμ°¨μ μΌλ΅ μ„ νƒν•λ” μ•κ³ λ¦¬μ¦
κ° μ„λ²„μ μ„±λ¥κ³Ό μ²λ¦¬μ‹κ°„μ΄ μ§§μ€ μ–΄ν”λ¦¬μΌ€μ΄μ…μ— κ¶μ¥
- **κ°€μ¤‘ λΌμ΄λ“λ΅λΉ**
κ° μ„λ²„μ κ°€μ¤‘μΉλ¥Ό λ¶€μ—¬ν•΄ μ²λ¦¬ μ©λ‰μ„ μ§€μ •ν•λ” μ•κ³ λ¦¬μ¦
- **μµμ† μ—°κ²° λ°©μ‹**
λ΅λ“ λ°Έλ°μ„κ°€ μ—°κ²°μ΄ κ°€μ¥ μ μ€ μ„λ²„λ¥Ό μ„ νƒν•λ” μ•κ³ λ¦¬μ¦
λ‹¤μ–‘ν• μ²λ¦¬μ©λ‰(μΌμ •ν•μ§€ μ•μ€ μ‘λ‹µ μ†λ„, μ„λ²„μ μ„±λ¥μ°¨μ΄)μ΄ λ°μƒν•λ” μ–΄ν”λ¦¬μΌ€μ΄μ…μ— κ¶μ¥
- **IP ν•΄μ‹**
ν΄λΌμ΄μ–ΈνΈμ IPμ£Όμ†λ¥Ό νΉμ • μ„λ²„λ΅ λ§¤ν•‘ν•μ—¬ μ‚¬μ©μμ™€ ν•­μƒ λ™μΌν• μ„λ²„μ μ—°κ²°μ„ λ³΄μ¥ν•λ” μ•κ³ λ¦¬μ¦

  <aside>
  π’΅ μ–΄λ–»κ² μ •μƒ μ΄μ© μƒνƒμ μ„λ²„λ¥Ό νλ‹¨ν• κΉ?<br>
  Load Balancerλ” μ£ΌκΈ°μ μΌλ΅ μ „λ‹¬ κ·μΉ™μ— μ •μλ ν”„λ΅ν† μ½κ³Ό ν¬νΈλ΅ μ„λ²„μ— μ—°κ²°μ„ μ‹λ„<br>
  μ—°κ²°μ— μ‹¤ν¨ν•λ” κ²½μ° Load Balancer λ” ν’€μ—μ„ ν•΄λ‹Ή μ„λ²„λ¥Ό μ μ™Έν•κ³  λ‹¤μ‹ μ—°κ²°μ— μ„±κ³µν• λ•κΉμ§€ νΈλν”½μ„ μ „λ‹¬ν•μ§€ μ•μ<br>

  </aside>

### β­οΈ μ£Όμ”κΈ°λ¥

- **NAT(Network Address Translation) : λ„¤νΈμ›ν¬ μ£Όμ† λ³€ν™**
λ„¤νΈμ›ν¬ κ³„μΈµμ—μ„ IP ν¨ν‚·μ TCP/UDP ν¬νΈ μ«μμ™€ μ¶λ°μ§€ λ° λ©μ μ§€μ IP μ£Όμ† λ“±μ„ μ¬κΈ°λ΅
    
    μ¦‰ λ‹¤μμ μ„λ²„μ μ‚¬μ„¤ IP λ¥Ό ν•λ‚μ κ³µμΈ IPλ΅ λ³€ν™ν•΄μ£Όλ” κΈ°λ¥
    
    <aside>
    π’΅ NAT μ™€ Proxy μ μ°¨μ΄μ μ€?<br>
    </aside>
    
    | NAT | Proxy |
    | --- | --- |
    | λ„¤νΈμ›ν¬ κ³„μΈµ | μ‘μ©κ³„μΈµ |
    | μ‚¬μ„¤ IP β†”Β κ³µμΈ IP μ—­ν•  | ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄ μ¤‘μ¬μ μ—­ν•  |
    | Router λ‚ λ°©ν™”λ²½ λ“± μ£Όλ³€ μ¥μΉμ— μν•΄ λ™μ‘ | DMZ(λ‚΄λ¶€, μ™Έλ¶€ λ„¤νΈμ›ν¬ μ‚¬μ΄ μμ—­) Zone μ— λ°°μΉν•μ—¬ λ™μ‘ |
    | μ”μ²­κ³Ό μ‘λ‹µ μ‚¬μ΄ λ„¤νΈμ›ν¬ κ³„μΈµμ—μ„ μ‚¬μ„¤ IP λ¥Ό κ³µμΈ IP λ΅ λ³€κ²½ | μ”μ²­κ³Ό μ‘λ‹µμ΄ Proxy Server λ¥Ό κ±°μ³μ„ μ „μ†΅ |
        
- **DSR(Dynamic Source Routing Protocol) : λ™μ  μ†μ¤ λΌμ°ν… ν”„λ΅ν† μ½**
μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ”μ²­μ— λ€ν• μ‘λ‹µμ„ ν•λ” κ²½μ° μ¤μ„μΉμ IPκ°€ μ•„λ‹ ν΄λΌμ΄μ–ΈνΈμ IPλ¥Ό μ „λ‹¬ν•μ—¬ λ„¤νΈμ›ν¬ μ¤μ„μΉλ¥Ό κ±°μΉμ§€ μ•κ³  λ°”λ΅ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ°Ύμ
    - Replicated Server λ“¤μ΄ ν° μ©λ‰μ μ‘λ‹µμ„ λ³΄λ‚΄κ² λλ‹¤λ©΄ Client λ΅ μ „λ‹¬μ „ Load Balancer μ—μ„ λ³‘λ© ν„μƒμ΄ λ°μƒ  
    DSR κΈ°λ¥μ„ μ‚¬μ©ν•μ—¬ ν° μ‚¬μ΄μ¦μ μ‘λ‹µ ν¨ν‚·μ— λ€ν•΄μ„ λ΅λ“λ°Έλ°μ„λ¥Ό κ±°μΉμ§€ μ•κ³  λ°”λ΅ ν΄λΌμ΄μ–ΈνΈλ΅ μ „μ†΅
- **Tunneling**
μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°„ μ¤‘κ°„μ—μ„ ν„°λ„λ§μ„ μ κ³µ  
μ—°κ²°λ μƒνΈ κ°„μ—λ§ μΊ΅μν™”λ ν¨ν‚·μ„ κµ¬λ³„ν•μ—¬ μΊ΅μν™”λ¥Ό ν•΄μ 

### π›Β μΆ…λ¥

<img width="888" alt="OSI" src="https://user-images.githubusercontent.com/74395748/146789372-7b280006-29db-42f2-bc32-20d812282e75.png">

- **L2**
  - Layer 2 λ°μ΄ν„° λ§ν¬ κ³„μΈµμ—μ„ MAC μ£Όμ†λ¥Ό λ°”νƒ•μΌλ΅ λ΅λ“λ°Έλ°μ‹±
  - L2SDR μ „λµμ„ μ‚¬μ©ν•λ ¤λ©΄ MAC μ£Όμ†μ λ³€ν™λ§ κ°€λ¥ν•λ―€λ΅ λ΅λ“λ°Έλ°μ„μ™€ μ„λ²„λ” κ°™μ€ λ„¤νΈμ›ν¬μ— μ΅΄μ¬ν•΄μ•Όλ¨
- **L3**
  - Layer 3 λ„¤νΈμ›ν¬ κ³„μΈµμ—μ„ IP λ¥Ό κΈ°μ¤€μΌλ΅ λ΅λ“λ°Έλ°μ‹±
  - L2 μ— λΌμ°ν… κΈ°λ¥μ΄ μ¶”κ°€λ ν•νƒ
- **L4 = Network Load Balancing(NLB)**
  - Layer 4 μ „μ†΅κ³„μΈµ(TCP/UDP)μ—μ„ IP, Port λ²νΈλ¥Ό κΈ°μ¤€μΌλ΅ λ΅λ“λ°Έλ°μ‹±
  - VIP(Virtual IP)μ„ ν†µν•΄μ„ Replicated Servers κ·Έλ£Ήν™”ν•μ—¬ κ΄€λ¦¬
  - L2, L3 μ κΈ°λ¥λ„ μ‚¬μ©κ°€λ¥ν•λ©° μ„¬μ„Έν• λΌμ°ν… μ²λ¦¬λ¥Ό μ κ³µ
  - μ£Όλ΅ RR λ°©μ‹μ μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•μ§€λ§ μ‚¬μ©μλ΅ μΈν•΄ λ‹¤λ¥Έ μ•κ³ λ¦¬μ¦ μ‚¬μ© κ°€λ¥

  ![L4](https://user-images.githubusercontent.com/74395748/146789454-726e6981-911b-4a00-8b2d-fdda6a209bfe.png)


- **L7**
  - Layer 7 μ‘μ©κ³„μΈµμ—μ„ TCP/UDP λ” λ¬Όλ΅  URL, FTP, μΏ ν‚¤ λ“±μ μ •λ³΄λ¥Ό κΈ°μ¤€μΌλ΅ λ΅λ“λ°Έλ°μ‹±
  - TLS Termination μ΄ λ°μƒ

    <aside>
    π’΅ TLS Termination μ΄λ€?<br>
    SSL λ΅ μ•”νΈν™”λ λ°μ΄ν„° νΈλν”½μ„ λ³µνΈν™”ν•λ” ν”„λ΅μ„Έμ¤

    </aside>

  - μƒμ„ κ³„μΈµμ—μ„ λ΅λ“λ¥Ό λ¶„μ‚°ν•λ―€λ΅ λ‹¤λ¥Έ λ΅λ“λ°Έλ°μ„μ— λΉ„ν•΄ λ”μ± μ„¬μ„Έν• λΌμ°ν…μ΄ κ°€λ¥
  - μΊμ‹± κΈ°λ¥μ„ μ κ³µ
  - DoS/DDoSμ™€ κ°™μ€ λΉ„μ •μƒμ μΈ νΈλν”½μ„ μ‚¬μ „μ— ν•„ν„°λ§ν•  μ μμ
  - μ μ ν• μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•΄ λ΅λ“λ°Έλ°μ‹±

  ![L7](https://user-images.githubusercontent.com/74395748/146789429-a50548e1-976f-4e5b-80bf-926b6b716e10.png)

## π“Β μ°Έκ³ μλ£

[λ΅λ“λ°Έλ°μ‹±μ΄λ€](https://www.digitalocean.com/community/tutorials/what-is-load-balancing#how-does-the-load-balancer-choose-the-backend-server)

[λ΅λ“λ°Έλ°μ„μ κΈ°λ¥, λ¶„μ‚° μ•κ³ λ¦¬μ¦ μΆ…λ¥](http://wiki.hash.kr/index.php/%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%8B%B1)

[λ΅λ“λ°Έλ°μ‹±(Load Balancing)κ³Ό κ³ κ°€μ©μ„±(HA)](https://prohannah.tistory.com/62)

[L2, L3, L4, L7 λ΅λ“λ°Έλ°μ‹±](https://tomining.tistory.com/117)

[L4, L7 μ¤ν•΄ν•  μ μλ” λ‚΄μ©](https://aws-hyoh.tistory.com/entry/L4L7-%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%8B%B1-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0)

[NAT μ μ—­ν• ](https://aws-hyoh.tistory.com/entry/L4-%EC%8A%A4%EC%9C%84%EC%B9%98-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-3)

[NAVER D2 HAProxy](https://d2.naver.com/helloworld/284659)

[SSL Terminationμ΄λ€ λ¬΄μ—‡μΈκ°€?](https://sepiros.tistory.com/m/50?category=1090822)

[λ”μ± Deep Dive](https://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/19860014876.pdf)
